{% extends "base.html" %}

{% block content %}
<div class="form-header">
  {% if is_self_nomination %}
  <h1>Withdraw Nomination</h1>
  {% else %}
  <h1>Respond to Nomination</h1>
  {% endif %}
  <h2>{{ election.title }}</h2>
</div>

<div class="form-container">
  <div class="nomination-details">
    <h3>Nomination from {{ nomination.nominator.first_name }} {{ nomination.nominator.last_name|slice:":1" }}.</h3>
    <p><strong>Submitted:</strong> {{ nomination.created_at|date:"F j, Y g:i A" }}</p>

    <hr>

    <div class="nomination-content">
      <div class="field-display">
        <label>Why are you nominating this person?:</label>
        <div class="field-value">{{ nomination.nomination_statement|linebreaks }}</div>
      </div>
    </div>

    <hr>

    {% if is_self_nomination %}
    <p>You can withdraw your self-nomination if you no longer wish to run for this position. You can also <a href="{% url 'nomination_edit' election.slug nomination.id %}">edit your nomination statement</a>.</p>

    <form method="post">
      {% csrf_token %}

      <div class="button-holder">
        <a href="{% url 'nomination_edit' election.slug nomination.id %}" class="submit-button">Update Nomination</a>
        <button type="submit" name="action" value="withdraw" class="secondary-button">Withdraw Nomination</button>
      </div>
    </form>
    {% else %}
    <h3>Your Response:</h3>
    <p>Please decide whether you would like to accept or decline this nomination.</p>

    <form method="post">
      {% csrf_token %}

      <div class="formfield">
        <label for="acceptance_note">Optional Note:</label>
        <textarea name="acceptance_note" id="acceptance_note" rows="4" placeholder="Add a note about your decision (optional)"></textarea>
        <span class="helptext">You can add a brief note explaining your decision.</span>
      </div>

      <div class="button-holder">
        <button type="submit" name="action" value="accept" class="submit-button">Accept Nomination</button>
        <button type="submit" name="action" value="decline" class="secondary-button">Decline Nomination</button>
      </div>
    </form>
    {% endif %}
  </div>
</div>
{% endblock %}
